# 短线集合程序使用指南

## 🎯 程序简介

短线集合程序是一个**一键运行所有选股程序**的工具，可以自动依次运行选股A、选股B、选股C三个程序，并分别生成输出文件。

**核心优势**：
- 一键运行，无需手动逐个执行
- 自动汇总结果，生成完整报告
- 节省时间，提高效率

---

## 🚀 快速开始

### 运行程序

```bash
python3 scripts/run_all_screeners.py
```

---

## 📋 运行流程

### 第一步：运行选股A
```
[正在运行] 选股A
================================================================================
AI辅助短线选股程序（选股A）
...
✅ 选股A 运行成功！
   执行时间: 18.32 秒
   输出文件: assets/data/selected_stocks_20260210.csv
   选股数量: 38 只
```

### 第二步：运行选股B
```
[正在运行] 选股B
================================================================================
选股B程序 - 风险过滤型选股
...
✅ 选股B 运行成功！
   执行时间: 5.21 秒
   输出文件: assets/data/risk_filtered_stocks_20260210.csv
   选股数量: 93 只
```

### 第三步：运行选股C
```
[正在运行] 选股C
================================================================================
选股C程序 - 组合型选股
...
✅ 选股C 运行成功！
   执行时间: 28.15 秒
   输出文件: assets/data/combined_stocks_20260210.csv
   选股数量: 34 只
```

### 汇总报告
```
================================================================================
短线集合 - 运行汇总报告
================================================================================

运行时间: 2026-02-10 17:30:00

【选股A】
   状态: ✅ 成功
   选股数量: 38 只
   输出文件: assets/data/selected_stocks_20260210.csv

【选股B】
   状态: ✅ 成功
   选股数量: 93 只
   输出文件: assets/data/risk_filtered_stocks_20260210.csv

【选股C】
   状态: ✅ 成功
   选股数量: 34 只
   输出文件: assets/data/combined_stocks_20260210.csv

--------------------------------------------------------------------------------
总计: 3/3 个程序运行成功
总计选股数量: 165 只（包含重复股票）
================================================================================

💡 使用建议：
   - 选股A（主动选股）：适合市场明确时，广泛撒网
   - 选股B（风险过滤）：适合任何市场，风险最低
   - 选股C（组合型）：推荐使用，双重保障，质量最高

📊 推荐优先级：选股C > 选股A > 选股B
```

---

## 📁 输出文件

运行后会在 `assets/data/` 目录下生成三个文件：

| 文件 | 说明 | 来源 |
|------|------|------|
| `selected_stocks_YYYYMMDD.csv` | 选股A结果 | 主动选股 |
| `risk_filtered_stocks_YYYYMMDD.csv` | 选股B结果 | 风险过滤 |
| `combined_stocks_YYYYMMDD.csv` | 选股C结果 | 组合型 |

---

## ⚙️ 运行参数

### 自动延时

程序会在每个选股程序之间自动添加2秒延时，避免API限流。

### 错误处理

- 如果某个程序运行失败，会继续运行其他程序
- 最终汇总报告中会显示所有程序的运行状态
- 不会因为单个程序失败而中断整个流程

---

## ⏰ 使用时机

**盘后15:10分运行**（需要完整的盘后数据）

---

## 💡 使用建议

### 场景1：第一次使用
```bash
# 运行所有程序，查看所有结果
python3 scripts/run_all_screeners.py
```

### 场景2：只关注质量最高的股票
```bash
# 运行集合程序后，优先查看选股C的结果
python3 scripts/run_all_screeners.py
# 然后查看：assets/data/combined_stocks_YYYYMMDD.csv
```

### 场景3：对比不同方案
```bash
# 运行集合程序，对比三个方案的结果差异
python3 scripts/run_all_screeners.py
# 查看三个CSV文件，对比选股逻辑
```

---

## 📊 三种选股方案对比

| 方案 | 输出数量 | 特点 | 推荐场景 |
|------|---------|------|---------|
| **选股A** | 38只 | 市场感知能力强 | 市场明确时 |
| **选股B** | 93只 | 风险控制严格 | 风险厌恶 |
| **选股C** | 34只 | 双重保障 | 推荐使用 |

---

## ⚠️ 注意事项

1. **运行时间**：全部运行约需要50-60秒
2. **API调用**：每个程序之间有2秒延时，避免限流
3. **错误处理**：即使某个程序失败，其他程序仍会继续运行
4. **文件覆盖**：如果文件已存在，会被新结果覆盖

---

## 🔍 常见问题

### Q1: 运行时间很长怎么办？
A: 正常情况下需要50-60秒，这是三个程序依次运行的正常时间。

### Q2: 某个程序运行失败怎么办？
A: 程序会继续运行其他程序，最终汇总报告中会显示失败原因。请检查网络连接和Token配置。

### Q3: 输出文件在哪里？
A: 所有输出文件都在 `assets/data/` 目录下，文件名包含日期。

### Q4: 如何只运行某个程序？
A: 直接运行对应的程序脚本：
```bash
# 只运行选股A
python3 scripts/ai_stock_screener.py

# 只运行选股B
python3 scripts/ai_stock_screener_v2.py

# 只运行选股C
python3 scripts/ai_stock_screener_v3.py
```

---

## 📚 相关文档

- [选股C行业板块功能说明](./STOCK_SCREENER_V3_INDUSTRY_UPDATE.md)
- [项目README](../README.md)
