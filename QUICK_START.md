# å¿«é€Ÿå¼€å§‹æŒ‡å—

## 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### æ­¥éª¤1: é…ç½®Token

ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶åŒ…å«ä½ çš„ Tushare Tokenï¼š

```bash
cat .env
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼ï¼š
```
TUSHARE_TOKEN=your_actual_token_here
```

å¦‚æœæ²¡æœ‰ï¼Œè¯·åˆ›å»ºæˆ–ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```bash
echo "TUSHARE_TOKEN=your_actual_token_here" >> .env
```

### æ­¥éª¤2: è¿è¡Œç®€å•æµ‹è¯•

```bash
cd /workspace/projects
python test_integration_simple.py
```

é¢„æœŸè¾“å‡ºï¼š
```
âœ… ç­–ç•¥ç®¡ç†å™¨æ¨¡å—å¯¼å…¥æˆåŠŸ
âœ… é…ç½®åˆå§‹åŒ–æˆåŠŸ
âœ… å¸‚åœºçŠ¶æ€æ£€æµ‹æˆåŠŸ
âœ… é€‰è‚¡é€‚é…å™¨åˆå§‹åŒ–æˆåŠŸ
âœ… å›æµ‹å¼•æ“åˆå§‹åŒ–æˆåŠŸ
```

### æ­¥éª¤3: è¿è¡Œæ¼”ç¤ºè„šæœ¬

```bash
python strategy_manager/demo_adapter.py
```

è¿™å°†å±•ç¤ºå®Œæ•´çš„åŠŸèƒ½æµç¨‹ï¼š
1. å¸‚åœºçŠ¶æ€æ£€æµ‹
2. é€‰è‚¡A/B/Cè¿è¡Œ
3. å›æµ‹å’Œå¯¹æ¯”

### æ­¥éª¤4: ä½¿ç”¨ä¸»æ§åˆ¶å™¨è¿›è¡Œé€‰è‚¡

```bash
# åŸºç¡€é€‰è‚¡ï¼ˆé€‰è‚¡Cï¼‰
python assets/main_controller_v2.py --screener C --output output/my_stocks.csv

# å¸¦å¸‚åœºçŠ¶æ€æ£€æµ‹
python assets/main_controller_v2.py --screener C --detect-market-state

# å¸¦å›æµ‹ï¼ˆæŒæœ‰5å¤©ï¼‰
python assets/main_controller_v2.py --screener C --enable-backtest --hold-days 5

# å®Œæ•´åŠŸèƒ½ï¼ˆæ£€æµ‹+å›æµ‹+é”™è¯¯æ£€æµ‹ï¼‰
python assets/main_controller_v2.py --screener C \
    --detect-market-state \
    --enable-backtest \
    --hold-days 5 \
    --detect-errors \
    --output output/complete_results.csv
```

## å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹å¸®åŠ©

```bash
python assets/main_controller_v2.py --help
```

### è¿è¡Œæ‰€æœ‰é€‰è‚¡ç¨‹åº

```bash
# åŸºç¡€è¿è¡Œ
python scripts/run_all_screeners.py

# ä½¿ç”¨é€‚é…å™¨æ¨¡å¼
python scripts/run_all_screeners.py --use-adapter

# å¯ç”¨æ‰€æœ‰åŠŸèƒ½
python scripts/run_all_screeners.py \
    --use-adapter \
    --detect-market-state \
    --enable-backtest \
    --hold-days 5 \
    --auto-fix-errors
```

### æ•°æ®æ ¼å¼æ£€æŸ¥

```bash
python assets/data_format_checker.py --file output/my_stocks.csv
```

## è¾“å‡ºè¯´æ˜

### é€‰è‚¡ç»“æœ

é€‰è‚¡ç»“æœå°†ä¿å­˜ä¸ºCSVæ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```
ts_code,name,industry,close,pct_chg,turnover_rate,volume_ratio,rank
```

ç¤ºä¾‹ï¼š
```
ts_code,name,industry,close,pct_chg,turnover_rate,volume_ratio,rank
000001.SZ,å¹³å®‰é“¶è¡Œ,é“¶è¡Œ,12.34,5.67,3.45,1.23,1
000002.SZ,ä¸‡ç§‘A,æˆ¿åœ°äº§,15.67,8.90,4.56,1.56,2
...
```

### å›æµ‹æŠ¥å‘Š

å›æµ‹æŠ¥å‘Šä¼šæ‰“å°åˆ°ç»ˆç«¯ï¼ŒåŒ…å«ï¼š

```
ğŸ“Š ç»Ÿè®¡æ‘˜è¦:
  å›æµ‹è‚¡ç¥¨æ•°: 16 åª
  èƒœç‡: 65.0%
  å¹³å‡æ”¶ç›Š: 3.2%
  ä¸­ä½æ•°æ”¶ç›Š: 2.8%
  æœ€ä½³æ”¶ç›Š: 15.6%
  æœ€å·®æ”¶ç›Š: -5.3%
  ç›ˆåˆ©ç¬”æ•°: 10
  äºæŸç¬”æ•°: 6
```

## å¸‚åœºçŠ¶æ€è¯´æ˜

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰å¸‚åœºçŠ¶æ€ï¼š

- **ç‰›å¸‚ (bullish)**: æŒ‡æ•°é«˜äº20æ—¥å‡çº¿ï¼Œä¸Šæ¶¨è¶‹åŠ¿æ˜æ˜¾
  - æ¨èç­–ç•¥: åŠ¨é‡ç­–ç•¥ï¼ˆé€‰è‚¡Bï¼‰

- **éœ‡è¡å¸‚ (neutral)**: æŒ‡æ•°åœ¨20æ—¥å‡çº¿é™„è¿‘æ³¢åŠ¨
  - æ¨èç­–ç•¥: ä»·å€¼ç­–ç•¥ï¼ˆé€‰è‚¡Aï¼‰

- **ç†Šå¸‚ (bearish)**: æŒ‡æ•°ä½äº20æ—¥å‡çº¿ï¼Œä¸‹è·Œè¶‹åŠ¿æ˜æ˜¾
  - æ¨èç­–ç•¥: é˜²å¾¡æ€§ç­–ç•¥ï¼ˆé€‰è‚¡Cï¼‰

## é€‰è‚¡ç¨‹åºè¯´æ˜

### é€‰è‚¡Aï¼ˆä»·å€¼ç­–ç•¥ï¼‰

- **é€‚ç”¨åœºæ™¯**: éœ‡è¡å¸‚
- **ç­›é€‰é€»è¾‘**: ä½ä¼°å€¼ã€é«˜ROEã€ç¨³å®šå¢é•¿
- **æ ¸å¿ƒæŒ‡æ ‡**: PEã€PBã€ROE

### é€‰è‚¡Bï¼ˆåŠ¨é‡ç­–ç•¥ï¼‰

- **é€‚ç”¨åœºæ™¯**: ç‰›å¸‚
- **ç­›é€‰é€»è¾‘**: çŸ­æœŸå¼ºåŠ¿ã€é«˜æ¢æ‰‹ã€çªç ´
- **æ ¸å¿ƒæŒ‡æ ‡**: æ¶¨å¹…ã€æ¢æ‰‹ç‡ã€é‡æ¯”

### é€‰è‚¡Cï¼ˆç»„åˆç­–ç•¥ï¼‰

- **é€‚ç”¨åœºæ™¯**: æ‰€æœ‰å¸‚åœº
- **ç­›é€‰é€»è¾‘**: ç»“åˆAçš„å¸‚åœºæ„ŸçŸ¥å’ŒBçš„é£é™©è¿‡æ»¤
- **æ ¸å¿ƒæŒ‡æ ‡**: å¤šç»´åº¦ç»¼åˆè¯„åˆ†
- **ç‰¹è‰²**: æ”¯æŒè¡Œä¸šæ¿å—åˆ†ç±»

## å¸¸è§é—®é¢˜

### Q1: æç¤ºTokenæ— æ•ˆï¼Ÿ

A: è¯·æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„Tushare Tokenæ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ²¡æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–å¼•å·ã€‚

### Q2: é€‰è‚¡ç»“æœä¸ºç©ºï¼Ÿ

A: å¯èƒ½åŸå› ï¼š
- å¸‚åœºç¯å¢ƒä¸é€‚åˆå½“å‰ç­–ç•¥
- ç­›é€‰æ¡ä»¶è¿‡äºä¸¥æ ¼
- æ•°æ®æºé—®é¢˜

å¯ä»¥å°è¯•ï¼š
- æ”¾å®½ç­›é€‰æ¡ä»¶
- åˆ‡æ¢åˆ°å…¶ä»–é€‰è‚¡ç¨‹åº
- æ£€æŸ¥å¸‚åœºçŠ¶æ€

### Q3: å›æµ‹å¤±è´¥ï¼Ÿ

A: å¯èƒ½åŸå› ï¼š
- é€‰è‚¡æ—¥æœŸä¸æ˜¯äº¤æ˜“æ—¥
- è‚¡ç¥¨åœç‰Œæˆ–é€€å¸‚
- æ•°æ®æºé—®é¢˜

å¯ä»¥å°è¯•ï¼š
- é€‰æ‹©æœ€è¿‘çš„æ•°æ®
- æ£€æŸ¥é€‰è‚¡åˆ—è¡¨æ˜¯å¦æœ‰é—®é¢˜è‚¡ç¥¨
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

### Q4: APIè°ƒç”¨æ¬¡æ•°è¿‡å¤šï¼Ÿ

A: æœ¬é¡¹ç›®å·²ä¼˜åŒ–ä¸ºæ‰¹é‡è°ƒç”¨ï¼Œå¤§å¹…å‡å°‘APIè¯·æ±‚æ¬¡æ•°ã€‚å¦‚æœä»ç„¶è¶…é™ï¼Œè¯·ï¼š
- é™ä½é€‰è‚¡é¢‘ç‡
- å¢åŠ ç¼“å­˜æ—¶é—´
- è€ƒè™‘ä½¿ç”¨æ•°æ®åº“å­˜å‚¨å†å²æ•°æ®

## è¿›é˜¶ä½¿ç”¨

### è‡ªå®šä¹‰ç­›é€‰å‚æ•°

ç¼–è¾‘é…ç½®æ–‡ä»¶æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼š

```bash
python assets/main_controller_v2.py \
    --screener C \
    --min-pe 5 \
    --max-pe 30 \
    --min-roe 10 \
    --min-turnover 2
```

### è¡Œä¸šç­›é€‰

```bash
# åªé€‰æ‹©é“¶è¡Œè‚¡
python assets/main_controller_v2.py --screener C --industry é“¶è¡Œ

# é€‰æ‹©å¤šä¸ªè¡Œä¸š
python assets/main_controller_v2.py --screener C --industry "é“¶è¡Œ,åŒ»è¯,ç§‘æŠ€"
```

### å®šæ—¶ä»»åŠ¡

å¯ä»¥ä½¿ç”¨cronæˆ–ç³»ç»Ÿè®¡åˆ’ä»»åŠ¡å®šæœŸè¿è¡Œï¼š

```bash
# æ¯å¤©æ—©ä¸Š9ç‚¹è¿è¡Œé€‰è‚¡
0 9 * * * cd /workspace/projects && python assets/main_controller_v2.py --screener C --detect-market-state --enable-backtest >> logs/screening.log 2>&1
```

## è·å–å¸®åŠ©

### æŸ¥çœ‹å®Œæ•´æ–‡æ¡£

- é›†æˆæŒ‡å—: `assets/INTEGRATION_GUIDE.md`
- é€‚é…å™¨æ–‡æ¡£: `strategy_manager/README_ADAPTER.md`
- å®Œæ•´æŠ¥å‘Š: `INTEGRATION_COMPLETE.md`

### è¿è¡Œæµ‹è¯•

```bash
# ç®€å•æµ‹è¯•
python test_integration_simple.py

# å®Œæ•´æµ‹è¯•
python assets/test_adapter_integration.py
```

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ“ˆ
